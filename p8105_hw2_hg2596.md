p8105_hw2_hg2596
================
2022-10-06

``` r
library(tidyverse)
```

    ## ── Attaching packages ─────────────────────────────────────── tidyverse 1.3.2 ──
    ## ✔ ggplot2 3.3.6      ✔ purrr   0.3.4 
    ## ✔ tibble  3.1.8      ✔ dplyr   1.0.10
    ## ✔ tidyr   1.2.0      ✔ stringr 1.4.1 
    ## ✔ readr   2.1.2      ✔ forcats 0.5.2 
    ## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
    ## ✖ dplyr::filter() masks stats::filter()
    ## ✖ dplyr::lag()    masks stats::lag()

``` r
library(readxl)
library(dplyr)
library(readr)
```

# Problem 2

# Import Mr.Trash Wheel

``` r
mtw = read_excel("./data/Trash_Wheel_Collection_Data.xlsx", sheet = "Mr_Trash_Wheel") 
```

    ## New names:
    ## • `` -> `...15`
    ## • `` -> `...16`

# Clean data for Mr.Trash Wheel

``` r
mtw_2 = read_excel("./data/Trash_Wheel_Collection_Data.xlsx", sheet = "Mr_Trash_Wheel",range = cell_cols("A:N"), col_names = TRUE, col_types = NULL, trim_ws = TRUE,skip = 1, n_max = 535) %>% 
  janitor::clean_names() %>% 
  drop_na(dumpster) %>%
  mutate(dumpster = as.character(dumpster)) %>%
  mutate(year = as.character(year)) %>%
  mutate(sports_balls = as.integer(sports_balls)) %>%
  mutate(marker = 1) %>%
  select(dumpster,marker,everything())
```

# Import Professor Trash Wheel

``` r
ptw = read_excel("./data/Trash_Wheel_Collection_Data.xlsx", sheet = "Professor_Trash_Wheel") 
```

# Clean data for Professor Trash Wheel

``` r
ptw_2 = read_excel("./data/Trash_Wheel_Collection_Data.xlsx", sheet = "Professor_Trash_Wheel", range = cell_cols("A:M"), col_names = TRUE, col_types = NULL, trim_ws = TRUE,skip = 1, n_max = 115) %>% 
  janitor::clean_names() %>% 
  filter(!is.na(month)) %>%
  drop_na(dumpster)%>%
  mutate(dumpster = as.character(dumpster)) %>%
  mutate(year = as.character(year)) %>%
  mutate(marker = 2) %>%
  select(dumpster,marker,everything())
```

# Merge through joint

``` r
merge = bind_rows(mtw_2,ptw_2) 
```

# Find Professor Trash Wheel Weight of trash

``` r
merge %>%
  filter(marker == 2) %>%
  pull(weight_tons) %>%
  sum(na.rm = TRUE) 
```

    ## [1] 190.12

# Find sum of sports balls

``` r
merge %>%
  filter(year == 2020) %>%
  pull(sports_balls) %>%
  sum(na.rm = TRUE) 
```

    ## [1] 856

This new dataset has 641 observations and 15 variables. Some key
variables are **dumpster**, **month**, **date**, **year**,
**weight(tons)**,**sports balls** and various other trash items. The
**marker** variable is too help keep track of each dataset, “1”
indicates it came from Mr.Trash Wheel dataset and “2” indicates it came
from Professor Trash Wheel dataset.

The total weight of trash collected in Professor Trash Wheel is 190.12
tons.Also, the total number of sport balls 856 from Mr.Trash in 2020.

# Problem 3

# Upload Pols Month dataset

``` r
pols_month = read_csv("./data_2/fivethirtyeight_datasets/pols_month.csv", show_col_types = FALSE)
```

# Clean Pols Month dataset and add Variables

``` r
pols_month_2 = read_csv("./data_2/fivethirtyeight_datasets/pols_month.csv", show_col_types = FALSE) %>% 
  janitor::clean_names() %>%
  separate(mon,c("A", "B", "C")) %>%
  select("B","C","A", everything()) %>%
  rename(month = "B", day = "C", year = "A") %>%
  mutate(month = month.abb[as.numeric(month)]) %>%
  mutate(president = case_when(prez_dem == 1 ~ "dem" , 
                   prez_gop > 0 ~ "gop",
                   TRUE ~ "")) %>%
  select(-prez_dem) %>%
  select(-prez_gop) %>%
  select(-day)%>%
  mutate(month = as.character(month)) %>%
  select(year,month,everything())
```

# Upload snp dataset

``` r
snp = read_csv("./data_2/fivethirtyeight_datasets/snp.csv", show_col_types = FALSE)
```

# Clean snp dataset and add variables

``` r
snp_2 = read_csv("./data_2/fivethirtyeight_datasets/snp.csv", show_col_types = FALSE) %>%
  janitor::clean_names() %>%
  separate(date,c("A", "B", "C")) %>%
  select("B","C","A", everything()) %>%
  rename(month = "B", day = "C", year = "A") %>%
  select(-day)%>%
  mutate(year = as.integer(year)) %>%
  mutate(month = month.abb[as.numeric(month)])%>%
  mutate(year = if_else(year < 23, year + 2000, year +1900)) %>%
  mutate(year = as.character(year)) %>%
  mutate(month = as.character(month)) %>%
  select(year,month,everything())
```

# Upload Unemployed dataset

``` r
unemp = read_csv("./data_2/fivethirtyeight_datasets/unemployment.csv", show_col_types = FALSE)
```

# Clean Unemployed dataset

``` r
unemp_2 = read_csv("./data_2/fivethirtyeight_datasets/unemployment.csv", show_col_types = FALSE) %>%
  janitor::clean_names()
```

# Change formate of Unemployed dataset

``` r
unemp_3 = pivot_longer(
    unemp_2, 
    jan:dec,
    names_to = "month", 
    values_to = "percent_unemployment"
    ) %>%
  mutate(year = as.character(year))
```

# Left join SPN and Pols

``` r
merge_snp_pols = 
  left_join(snp_2,pols_month_2, by = c("year","month"))
```

# Left join merge to umployment

``` r
final_merge = 
  left_join(merge_snp_pols, unemp_3, by = c("year", "month")) 
```

``` r
final_merge %>%
  pull(year) %>%
  range(na.rm = TRUE) 
```

    ## [1] "2001" "2012"

The **pols month** dataset originally had 822 observations and 9
variables. Key variables before cleaning was **mon** and **prez_gop**,
**prez_dem**,**sen_gop** and other variables that characterize political
parties. **Mon** variable was a date that was written as “mon/day/year”.
Cleaned this variable by separating the one **mon** variable into three
separate variables: **month**, **day** and **year**. Another way we
cleaned this dataset was by deleting **date**, **prez_gop**,
**prez_dem** and creating a new variable **president** that used
infromation from prez_gop and prez_dem.

The **snp** dataset originally had 787 observations and 2
variables.**Snp** only had two variables, **date** and close. **Date**
variable took the form of “mon/day/year”, however, ever cleaning this
variable was separated into three separate variables, **month** ,
**day** and **year**.

The **unemployment** dataset originally had 68 observations and 13
variables. The dataset was originally wide it needed to be cleaned so
that it could be long format instead with three variables **year**,
**month** and **percent unemployment**.

The **final_merge** dateset after the proper joining, has 787
observations and 11 variables.The years range from 2001, 2012 years.
Some of the key variables in **final merge** dataset are **year**,
**month**, **percent unemployment** and some variables that characterize
political parties.
